<dialog id="project-modal" class="bg-neutral-900 text-white rounded-3xl border border-neutral-700 shadow-2xl p-0 w-full max-w-4xl backdrop:bg-black/80 m-auto">

  <div class="relative h-48 w-full overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-t from-neutral-900 to-transparent z-10"></div>
      <img id="modal-img" src="" alt="Project Header" class="w-full h-full object-cover opacity-50">
      <button id="close-modal" class="absolute top-4 right-4 z-20 bg-black/50 p-2 rounded-full hover:bg-white/20 transition text-white">
        ✕
      </button>
  </div>

  <div class="p-8 -mt-10 relative z-20">
    <div class="flex flex-wrap gap-2 mb-4" id="modal-tags">
        </div>

    <h2 id="modal-title" class="text-3xl md:text-4xl font-bold text-white mb-6"></h2>

    <div id="modal-content" class="prose prose-invert max-w-none text-gray-300"></div>
  </div>
</dialog>

<style>
  dialog[open] {
    animation: fade-in 0.3s ease-out;
  }
  dialog::backdrop {
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
  }
  @keyframes fade-in {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
</style>

<script>
    // Lógica para abrir/cerrar y rellenar datos
    const modal = document.getElementById('project-modal');
    const closeBtn = document.getElementById('close-modal');

    // Función global para abrir el modal (llamada desde los botones)
    window.openProjectModal = (project) => {
        // Rellenar datos
        document.getElementById('modal-title').innerText = project.title;
        document.getElementById('modal-img').src = project.image;
        document.getElementById('modal-content').innerHTML = project.detailsHTML;

        // Limpiar y rellenar tags
        const tagsContainer = document.getElementById('modal-tags');
        tagsContainer.innerHTML = '';
        project.tags.forEach(tag => {
            const span = document.createElement('span');
            span.className = 'px-3 py-1 bg-white/10 rounded-full text-xs font-mono text-emerald-300 border border-emerald-500/20';
            span.innerText = tag;
            tagsContainer.appendChild(span);
        });

        modal.showModal();
        document.body.style.overflow = 'hidden'; // Bloquear scroll del body
    }

    // Cerrar modal
    closeBtn.addEventListener('click', () => {
        modal.close();
        document.body.style.overflow = 'auto';
    });

    // Cerrar al hacer clic fuera
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.close();
            document.body.style.overflow = 'auto';
        }
    });
</script>